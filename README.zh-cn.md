![Header image](/assets/header.svg)

[![npm](https://img.shields.io/npm/v/bilibili-danmaku-client.svg?style=flat-square)](https://www.npmjs.com/package/bilibili-danmaku-client)
[![npm](https://img.shields.io/npm/l/bilibili-danmaku-client.svg?style=flat-square)](https://www.npmjs.com/package/bilibili-danmaku-client)
[![david-dm](https://img.shields.io/david/std4453/bilibili-danmaku-client.svg?style=flat-square)](https://github.com/std4453/bilibili-danmaku-client)
[![Maintainability](https://api.codeclimate.com/v1/badges/0f3581cbb3d2d9bd0243/maintainability)](https://codeclimate.com/github/std4453/bilibili-danmaku-client/maintainability)

# å“”å“©å“”å“©å¼¹å¹•è‡ªåŠ¨æ‰‹è®°äººå¶

> å½¼å¥³ã¯ã¾ã çŸ¥ã‚‰ãªã„ã€ã€Œæ„›ã—ã¦ã‚‹ã€ã®æ„å‘³ã‚’ã€‚

> å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯ï¼ğŸ»

Bç«™ç›´æ’­å¼¹å¹•æ¥å£çš„javascriptå®¢æˆ·ç«¯å®ç°ï¼Œåœ¨Node.jså’Œæµè§ˆå™¨æ®µå‡å¯ä½¿ç”¨ã€‚

## ç›®å½•

- [ç¿»è¯‘ç‰ˆæœ¬](#ç¿»è¯‘ç‰ˆæœ¬)
- [ç®€ä»‹](#ç®€æ´)
- [å®‰è£…](#å®‰è£…)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
    - [å»ºç«‹é“¾æ¥](#å»ºç«‹è¿æ¥)
    - [ç›‘å¬æ¶ˆæ¯](#ç›‘å¬æ¶ˆæ¯)
    - [ç›‘å¬ç”Ÿå‘½å‘¨æœŸäº‹ä»¶](#ç›‘å¬ç”Ÿå‘½å‘¨æœŸäº‹ä»¶)
    - [å…³é—­å®¢æˆ·ç«¯](#å…³é—­å®¢æˆ·ç«¯)
- [åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨](#åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨)
- [æœ¬åœ°å¼€å‘](#æœ¬åœ°å¼€å‘)
- [å¤–éƒ¨é“¾æ¥](#å¤–éƒ¨é“¾æ¥)
- [ä½œè€…](#ä½œè€…)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ç¿»è¯‘ç‰ˆæœ¬

[English](https://github.com/std4453/bilibili-danmaku-client/blob/master/README.md)

[ç®€ä½“ä¸­æ–‡](https://github.com/std4453/bilibili-danmaku-client/blob/master/README.zh-cn.md)

## ç®€ä»‹

å«Œå¼¹å¹•å§¬éš¾ç”¨ï¼Ÿæƒ³èµš(zi)ç‚¹(dong)è¾£(chou)æ¡(jiang)ï¼Ÿæƒ³å¼„ä¸ªçœ‹~~çŸ¥ä¹~~bç«™ï¼Ÿï¼ˆè¿™ä¸ªæˆ‘å·²ç»åœ¨å¼„äº†è¿˜è¯·å‹¿å¿µ~ï¼‰æˆ‘æ˜¯æ¸£æ¸£è¾‰ï¼Œèˆ¹æ–°çš„bç«™ç›´æ’­å¼¹å¹•å®¢æˆ·ç«¯ï¼Œèµ°è¿‡è·¯è¿‡ä¸è¦é”™è¿‡å“¦ï¼

(å—¯æ‰€ä»¥å¦‚æœä½ æ˜¯æŸå¥‡è‰ºæŸé…·ç”¨æˆ·å‡ºé—¨å·¦è½¬ä¸è°¢)

ï¼ˆæ¸…å—“å­ï¼‰`bilibili-danmaku-client`æ˜¯ä¸€ä¸ªå…¼å®¹Node.jså’Œæµè§ˆå™¨ç«¯çš„`npm`åŒ…ï¼Œå…¶APIç®€å•ï¼Œæ˜“ç”¨ï¼Œæµç•…ã€‚ä½¿ç”¨å®ƒï¼Œä¼šè®©ä½ æ‹¥æœ‰å›å®¶èˆ¬çš„ä½“éªŒã€‚

å°±é…±ã€‚

## å®‰è£…

æ‰ï¼Œæ‰ä¸æ˜¯å› ä¸ºä½ å¸…æ‰æ•™ä½ æ€ä¹ˆå®‰è£…çš„å‘¢ï¼è¿™ä¹ˆç®€å•çš„äº‹ï¼Œä¸åº”è¯¥ç”Ÿä¸‹æ¥å°±ä¼šåšå—ï¼ï¼ˆæ‘”ï¼‰

é‚£ï¼Œé‚£ä½ å¬å¥½äº†å“¦ï¼å…ˆ[å®‰è£…`node`å’Œ`npm`](https://www.runoob.com/nodejs/nodejs-install-setup.html)ï¼Œç„¶åï¼š

```console
    $ npm install --save bilibili-danmaku-client
```

ï¼ˆè„¸çº¢ï¼‰åˆ«é—®é‚£ä¹ˆå¤šä¸ºä»€ä¹ˆäº†ï¼è·Ÿç€åšå°±æ˜¯äº†ï¼è¡Œä¸è¡Œæœ¬å°å§æŠŠä½ ç”µæˆçƒ¤çŒªè‚‰ï¼å¦‚æœè¹¦å‡ºæ¥ä»€ä¹ˆ`peer dependencies not installed`ä¹‹ç±»çš„ï¼Œä¸è¦ç®¡ä»–å°±æ˜¯äº†ï¼çŸ¥é“äº†å—ï¼

å…¶å®[ä¸‹é¢](#åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨)å†™äº†æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå¯ä¸æ˜¯æˆ‘æƒ³è¦å‘Šè¯‰ä½ çš„å“¦ï¼è¿˜ä¸æ˜¯çœ‹ä½ åªèº«ä¸€äººæ€ªå¯æ€œçš„â€¦â€¦

## ç”¨æ³•

> ä¿—è¯è¯´çš„å¥½ï¼Œæ˜¯éª¡å­æ˜¯é©¬ï¼Œ[æ‹‰å‡ºæ¥æºœæºœ](https://std4453.github.io/bilibili-danmaku-client)ã€‚ç§ä¸€ç§ï¼Œ çœ‹ä¸€çœ‹å˜ï¼

èµµå¿ ç¥¥è€å¸ˆè¯´è¿‡ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨`bilibili-danmaku-client`çš„è¯ï¼Œä½ å°±å¾—ï¼š

### å»ºç«‹è¿æ¥

```javascript
    const DanmakuClient = require('bilibili-danmaku-client');
    const client = new DanmakuClient({
        room: 5440, // https://live.bilibili.com/1
    });
```

### ç›‘å¬æ¶ˆæ¯

```javascript
    const client = ...;
    client.on('danmaku', ({ content, sender }) =>
        console.log(`${sender.name}: ${content}`));
    client.on('gift', ({ giftName, num, sender } =>
        console.log(`${sender.name} => ${giftName} * ${num}`)));
```

æ¶ˆæ¯éƒ¨åˆ†çš„å…·ä½“ç»†èŠ‚è¯·çœ‹[`docs/messages.md`](https://github.com/std4453/bilibili-danmaku-client/blob/master/docs/messages.zh-cn.md)ã€‚

### ç›‘å¬ç”Ÿå‘½å‘¨æœŸäº‹ä»¶

```javascript
    const client = ...;
    client.on('opened',  () => console.log('Client opened.'));
    client.on('terminated', () => console.log('Client terminated'));
```

ï¼ˆè¿™å°±ä¸ç”¨ç¿»è¯‘äº†å§)

### å…³é—­å®¢æˆ·ç«¯

```javascript
    const client = ...;
    client.terminate();
    client.on('terminated' () => console.log('Client terminated'));
```

æ³¨æ„`terminate()`åªå‘å®¢æˆ·ç«¯æå‡ºå…³é—­è¯·æ±‚ï¼Œå®¢æˆ·ç«¯æ­£å¼å…³é—­åä¼šäº§ç”Ÿ`'terminated'`äº‹ä»¶ã€‚å¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œè¯·æ ¹æ®`'terminated'`äº‹ä»¶æ¥è¿›è¡Œå¤„ç†ã€‚

å…³äº`DanmakuClient`ç±»çš„æ›´å¤šä¿¡æ¯è¯·çœ‹ [`docs/api.md`](https://github.com/std4453/bilibili-danmaku-client/blob/master/docs/api.zh-cn.md)ã€‚

## åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨

> æœ¬æ¥æ— ä¸€ç‰©ï¼Œä½•å¤„æƒ¹å°˜åŸƒ â€”â€”æ…§èƒ½æ³•å¸ˆ

äº‹å®ä¸Š`bilibili-danmaku-client`æœ¬èº«åœ¨æµè§ˆå™¨ä¸­çš„ä½¿ç”¨å¹¶ä¸æ„æˆé—®é¢˜ï¼Œä½†å®ƒæ‰€ä¾èµ–çš„`x-platform-ws`ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘å†™çš„ä¸€ä¸ªå°å·¥å…·ï¼‰å°±éœ€è¦è¿›è¡Œè¿™æ–¹é¢çš„è€ƒè™‘ã€‚

ä¸ºäº†èƒ½å¤Ÿåœ¨æµè§ˆå™¨å’ŒNode.jsç«¯çš„è¡Œä¸ºä¿æŒä¸€è‡´ï¼Œ`x-platform-ws`åœ¨æµè§ˆå™¨ä¸Šä½¿ç”¨`buffer`å’Œ`events`è¿™ä¸¤ä¸ªnpmåŒ…æ¥ä»£æ›¿å…¶Node.jsä¸Šçš„åŒåæ¨¡å—ï¼Œå¹¶å°†ä»–ä»¬è®¾å®šä¸º[_peer dependencies_](https://nodejs.org/en/blog/npm/peer-dependencies/)ã€‚ï¼ˆè¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒéš¾ä»¥ç¿»è¯‘ï¼‰è€Œå½“è¿è¡Œ`npm install`æ—¶ï¼Œä½ å°±æœ‰å¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼ _peer dependencies_ æœªå®‰è£…ä¹‹ç±»çš„é”™è¯¯ä¿¡æ¯ã€‚

è¿™å®é™…ä¸Šé™¤äº†æœ‰ç‚¹æƒ¹äººåŒçƒ¦ä»¥å¤–å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚å®é™…ä¸Šï¼Œå¦‚æœä½ åªåœ¨Node.jsç«¯ï¼ˆæˆ–è€…electronç­‰ç±»ä¼¼ç¯å¢ƒä¸‹ï¼‰ä½¿ç”¨`bilibili-danmaku-client`çš„è¯ï¼Œé‚£ä¹ˆä¸å®‰è£…è¿™äº›åº“ä¹Ÿèƒ½è¿è¡Œè‰¯å¥½ã€‚

å¦‚æœä½ è¿˜æ‰“ç®—åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨`bilibili-danmaku-client`çš„è¯ï¼Œé‚£æˆ‘å»ºè®®æœ€å¥½ä½¿ç”¨[browserify](https://browserify.org/)æˆ–[webpack](https://webpack.js.org/)ä¹‹ç±»çš„æ‰“åŒ…å·¥å…·å¯¹ä½ çš„é¡¹ç›®è¿›è¡Œæ‰“åŒ…ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä»–ä»¬ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°`x-platform-ws`ä½¿ç”¨äº†`buffer`å’Œ`events`æ¨¡å—ï¼Œå¹¶ä¸”å°†ä»–ä»¬å¯¹åº”çš„npmåŒ…æ‰“åŒ…åˆ°æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶ä¸­ã€‚å¦‚æœä½ ä¸æ„¿æ„æ‰“åŒ…çš„è¯ï¼Œé‚£ä½ å°±å¾—è‡ªå·±æ‰¾åˆ°è§£å†³æ–¹æ³•äº†ã€‚æ®‹å¿µã§ã™ã€‚\(ï¿£yâ–½,ï¿£\)â•­

## å¼€å‘

å“Ÿ~è¥¿ï¼ç”¨çš„è¿˜æ»¡æ„å—ï¼è®©æˆ‘çœ‹åˆ°ä½ ä»¬çš„åŒæ‰‹ï¼
> ä¼—äººï¼šä¸â€”â€”æ»¡â€”â€”æ„â€”â€”

ä¸æ»¡æ„ï¼Ÿè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼ŒçŸ¥ä¸çŸ¥é“ï¼Ÿ
> ä¼—äººï¼š
> é‚£â€”â€”æˆ‘â€”â€”ä»¬â€”â€”
> æ€â€”â€”ä¹ˆâ€”â€”è‡ªâ€”â€”å·±â€”â€”
> åŠ¨â€”â€”æ‰‹â€”â€”å‘¢â€”â€”

å¾ˆç®€å•ï¼ä½ åªè¦ï¼š

1. å°†gité¡¹ç›®å…‹éš†åˆ°æœ¬åœ°

```console
    $ git clone -b master https://github.com/std4453/bilibili-danmaku-client.git
```

2. å®‰è£…ä¾èµ–é¡¹+æ„å»º

```console
    $ npm install && npm run build
```

3. è¿è¡Œæµ‹è¯•

```console
    $ npm test
```

ãã‚Œã§ååˆ†ã‚ã‚ˆï¼ãŠæ¥½ã—ã¿ã«ï¼

ï¼ˆå—¯ä½ æ²¡èµ°é”™è¿™çœŸçš„æ˜¯ä¸­æ–‡ç‰ˆï¼‰

## å¤–éƒ¨é“¾æ¥

- [åœ¨çº¿æ¼”ç¤º](https://std4453.github.io/bilibili-danmaku-client)
- [npmåŒ…](https://www.npmjs.com/package/bilibili-danmaku-client)
- [çŸ¥ä¹æ–‡ç« ](https://zhuanlan.zhihu.com/p/37874066) ï¼ˆæ¬¢è¿ç‚¹èµã€å…³æ³¨ï¼‰
- [APIæ–‡æ¡£](https://github.com/std4453/bilibili-danmaku-client/blob/master/docs/api.zh-cn.md)

## ä½œè€…

- __std4453__ - [me@std4453.com](mailto:me@std4453.com) - [çŸ¥ä¹](https://www.zhihu.com/people/std4453)

## è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ _MIT_ è®¸å¯è¯ï¼Œè¯¦æƒ…è¯·è§[LICENSE](https://github.com/std4453/bilibili-danmaku-client/blob/master/LICENSE)æ–‡ä»¶ã€‚
